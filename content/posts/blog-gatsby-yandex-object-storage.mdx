---
slug: posts/blog-gatsby-yandex-object-storage
date: "2020-01-07"
image: /blog-gatsby-yandex-object-storage/object-storage-social.png
title: Building personal website with Gatsby, Yandex Object Storage And Github Actions
tag: blog
---
import Typography from "@material-ui/core/Typography";

<p align="center">
  <img  width="60%" src="/blog-gatsby-yandex-object-storage/object-storage-social.png"/>
</p>

##### Why Gatsby
As I mentioned in the previous post I wanted to learn JS more.
That is why I decided not to use website constructors like Wordpress.

<br></br>

My first JS project was on React. I had choosen React over Vue and Angular because I like React syntax more.

<br></br>

For this blog I've chosen [Gatsby](https://gatsbyjs.com/docs/) as static website generator because 
it is based on React and has good integration with [Material UI](https://material-ui.com/)
(which I like from visual perspective), MDX (for quick notes) and a lot of plugins.

<br></br>

Static websites are very fast, since all content is pre-rendered and stored on file server. 
They are very scalable to amount of users and very cheap since they require 
only hosting to store files (and domain, optionally). 

<br></br>

Gatsby has relatively good documentation, so it is enough to start project from scratch. 
Just open its tutorial section [https://www.gatsbyjs.com/docs/tutorial/](https://www.gatsbyjs.com/docs/tutorial/).
You can also use this website code as a template [https://github.com/bakuteyev/personal-site](https://github.com/bakuteyev/personal-site).
<br></br>


###### Problems which I've had

I will mention here just a few problems which I've had.

* I didn't find easy way to avoid code duplication of gatsby static graphql queries.

* It is better to design your website as multipage app. 
It will allow to have better SEO optimization. 
Gatsby unfortunately doesn't have easy method to have static paths for dynamic content.
For example in the first version I had dynamic tabs [https://material-ui.com/ru/components/tabs/](https://material-ui.com/ru/components/tabs/).
Then I've tried to have for each tab it's own url, but I found it too complicated, even with 
[query-string plugin](https://www.npmjs.com/package/query-string). 
So I've just made navigation bar static at least for now.

* Don't forget to add favicon, website owner confirmation meta tag (for webmaster), 
metrica or analytics tracking (to monitor site visits), Sitemap.xml and robot.txt files. 
It is really important to make your site visible for search engines. 
For these things I've used gatsby plugins. You can find them in [package.json](https://github.com/bakuteyev/personal-site/blob/main/package.json).
At this time I mostly concentrated on [Yandex](yandex.ru/) search engine. 
I will continue to improve SEO otimization for google.

<br></br>

##### Hosting 
I've used [Yandex Object Storage](https://cloud.yandex.com/services/storage) since it provides 
really cheap and fast S3 compatible file storage. 
It has good [docs](https://cloud.yandex.com/docs/storage/concepts/hosting) and easy to use.

<br></br>

At the first time I used [s3fs](https://cloud.yandex.com/docs/storage/tools/s3fs) 
for manual deploy, but I found it too slow.
Then I decided to switch to [Cyberduck](https://cloud.yandex.com/docs/storage/tools/cyberduck)
and stuck with it.


<br></br>

##### Deployment
Of course for convinience deployment should be automated. 
My requirement was to be able to add and modify posts with my smartphone.
I've google for different methods and decided to use GitHub as CMS 
and Github Actions as CI/CD tool. With Github I'm sure that I don't lose 
any information (beacuse of version control) and Github Actions is free and fast deployment tool.
For public projects it has 2000 free deploy minutes, which is pretty enough for me.

###### Github Actions 
I've used [this action](https://github.com/marketplace/actions/yandex-object-storage-static-website)
in [my deploy workflow](https://github.com/bakuteyev/personal-site/blob/main/.github/workflows/main.yml).
Just don't forget that gatsby stores its build files in public folder.


<br></br>

##### Results and future plans
I'm pretty happy with the result I've got. Site is fast. 
Maybe it has some problems with css, but for me it's ok.
In the future I'm planning to add integration with telegram bot
with help of [Yandex Cloud Functions](https://cloud.yandex.com/services/functions)
to be able to make small posts with telegram (for example to save links for interesting web pages).

<br></br>

I made already the first prototype and it promises to be very cost efficient and easy to create.


